<!-- Editar Permiso -->
<div class="admin-container">
    <div class="admin-header">
        <div>
            <h2>{{page_title}}</h2>
            <p class="text-muted">Editando: {{#permission}}<strong>{{name}}</strong>{{/permission}}</p>
        </div>
        <div class="user-actions">
            <a href="/admin/permissions" class="btn btn-sm btn-secondary">
                <i class="bi bi-arrow-left"></i> Volver
            </a>
        </div>
    </div>

    {{#errors}}
    <div class="alert alert-danger">
        <i class="bi bi-exclamation-triangle"></i>
        <div><strong>Errores:</strong><ul>{{#errors}}<li>{{.}}</li>{{/errors}}</ul></div>
    </div>
    {{/errors}}

    <div class="form-section">
        {{#permission}}
        <form method="POST" action="/admin/permissions/update" class="perm-form">
            <input type="hidden" name="id" value="{{id}}">
            <div class="form-card">
                <h3><i class="bi bi-key"></i> Informaci贸n del Permiso</h3>
                <div class="form-group">
                    <label for="name">Nombre *</label>
                    <input type="text" id="name" name="name" class="form-input" value="{{name}}" required>
                </div>
                <div class="form-group">
                    <label for="slug">Slug</label>
                    <input type="text" id="slug" name="slug" class="form-input" value="{{slug}}" readonly disabled>
                    <small class="form-help">El slug no se puede modificar</small>
                </div>
                <div class="form-group">
                    <label for="module">M贸dulo *</label>
                    <input type="text" id="module" name="module" class="form-input" value="{{module}}" list="modules-list" required>
                    <datalist id="modules-list">
                        {{#modules}}<option value="{{.}}">{{/modules}}
                    </datalist>
                </div>
                <div class="form-group">
                    <label for="description">Descripci贸n</label>
                    <textarea id="description" name="description" class="form-textarea" rows="3">{{description}}</textarea>
                </div>
            </div>

            <div class="form-card info-card">
                <h3><i class="bi bi-info-circle"></i> Informaci贸n Adicional</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <span>Roles con este permiso:</span>
                        <div class="roles-list">
                            {{#permission_roles}}
                            <span class="role-badge">{{name}}</span>
                            {{/permission_roles}}
                            {{^permission_roles}}
                            <span class="text-muted">Ninguno</span>
                            {{/permission_roles}}
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check-circle"></i> Guardar Cambios
                </button>
                <a href="/admin/permissions" class="btn btn-secondary">
                    <i class="bi bi-x-circle"></i> Cancelar
                </a>
            </div>
        </form>
        {{/permission}}
    </div>
</div>
<style>
.admin-container{padding:20px 0;max-width:900px;margin:0 auto}.admin-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid var(--border-color)}.admin-header h2{color:var(--text-primary);margin:0 0 5px 0}.text-muted{color:var(--text-secondary);margin:0}.user-actions{display:flex;gap:10px}.btn-sm{padding:8px 16px;font-size:.875rem}.btn-secondary{background:var(--bg-secondary);color:var(--text-primary)}.btn-secondary:hover{background:var(--border-color)}.alert{padding:15px 20px;border-radius:8px;margin-bottom:20px}.alert-danger{background:#f8d7da;color:#721c24;border-left:4px solid #dc3545}.alert ul{margin:10px 0 0 20px}.form-section{background:var(--bg-secondary);border-radius:12px;padding:30px}.form-card{background:var(--bg-primary);border-radius:8px;padding:25px;margin-bottom:20px}.form-card h3{color:var(--text-primary);margin:0 0 20px 0;display:flex;align-items:center;gap:10px}.form-group{margin-bottom:20px}.form-group label{display:block;margin-bottom:8px;color:var(--text-primary);font-weight:500}.form-input,.form-textarea{width:100%;padding:10px 12px;border:1px solid var(--border-color);border-radius:6px;background:var(--bg-secondary);color:var(--text-primary)}.form-help{display:block;margin-top:5px;color:var(--text-secondary);font-size:.85rem}.info-card{border-left:4px solid var(--iser-blue)}.info-item{padding:15px;background:var(--bg-secondary);border-radius:6px}.info-item>span{display:block;font-weight:600;color:var(--text-primary);margin-bottom:10px}.roles-list{display:flex;gap:5px;flex-wrap:wrap}.role-badge{background:var(--iser-blue);color:#fff;padding:4px 10px;border-radius:4px;font-size:.85rem}.form-actions{display:flex;gap:15px;padding-top:20px;border-top:1px solid var(--border-color)}.btn{padding:12px 24px;border:none;border-radius:6px;font-weight:500;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:8px}.btn-primary{background:var(--iser-red);color:#fff}.btn-primary:hover{background:#c82333}.btn-secondary{background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)}.btn-secondary:hover{background:var(--border-color)}
</style>
