<div class="profile-header mb-4">
    <div class="card bg-gradient-primary text-white">
        <div class="card-body p-4">
            <div class="row align-items-center">
                <div class="col-auto">
                    <img src="{{user.avatar}}" alt="{{user.name}}" class="rounded-circle border border-3 border-white" width="100" height="100" style="object-fit: cover;">
                </div>
                <div class="col">
                    <h2 class="mb-1">{{user.name}}</h2>
                    <p class="mb-2 opacity-75">{{user.email}}</p>
                    <div class="d-flex gap-2">
                        <span class="badge bg-light text-dark">
                            <i class="fas fa-user-tag me-1"></i>
                            {{user.role}}
                        </span>
                        {{#user.department}}
                        <span class="badge bg-light text-dark">
                            <i class="fas fa-building me-1"></i>
                            {{user.department}}
                        </span>
                        {{/user.department}}
                    </div>
                </div>
                <div class="col-auto">
                    <a href="/profile/edit" class="btn btn-light">
                        <i class="fas fa-edit me-2"></i>
                        Editar Perfil
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Información Personal -->
    <div class="col-lg-4 mb-4">
        <div class="card mb-4">
            <div class="card-header bg-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-user me-2 text-primary"></i>
                    Información Personal
                </h5>
            </div>
            <div class="card-body">
                <div class="profile-info">
                    <div class="info-item mb-3">
                        <label class="text-muted small">Nombre Completo</label>
                        <p class="mb-0 fw-500">{{user.fullname}}</p>
                    </div>

                    <div class="info-item mb-3">
                        <label class="text-muted small">Email</label>
                        <p class="mb-0">
                            <a href="mailto:{{user.email}}" class="text-decoration-none">
                                {{user.email}}
                            </a>
                        </p>
                    </div>

                    {{#user.phone}}
                    <div class="info-item mb-3">
                        <label class="text-muted small">Teléfono</label>
                        <p class="mb-0">{{user.phone}}</p>
                    </div>
                    {{/user.phone}}

                    <div class="info-item mb-3">
                        <label class="text-muted small">Miembro Desde</label>
                        <p class="mb-0">{{user.member_since}}</p>
                    </div>

                    <div class="info-item mb-0">
                        <label class="text-muted small">Último Acceso</label>
                        <p class="mb-0">{{user.last_login}}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Estadísticas -->
        <div class="card">
            <div class="card-header bg-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-bar me-2 text-success"></i>
                    Estadísticas
                </h5>
            </div>
            <div class="card-body">
                {{#stats}}
                <div class="stat-item d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
                    <div>
                        <i class="fas fa-book text-primary me-2"></i>
                        <span>Cursos Inscritos</span>
                    </div>
                    <strong class="text-primary">{{stats.courses}}</strong>
                </div>

                <div class="stat-item d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
                    <div>
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <span>Cursos Completados</span>
                    </div>
                    <strong class="text-success">{{stats.completed}}</strong>
                </div>

                <div class="stat-item d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
                    <div>
                        <i class="fas fa-certificate text-warning me-2"></i>
                        <span>Certificados</span>
                    </div>
                    <strong class="text-warning">{{stats.certificates}}</strong>
                </div>

                <div class="stat-item d-flex justify-content-between align-items-center mb-0">
                    <div>
                        <i class="fas fa-star text-info me-2"></i>
                        <span>Puntos</span>
                    </div>
                    <strong class="text-info">{{stats.points}}</strong>
                </div>
                {{/stats}}
            </div>
        </div>
    </div>

    <!-- Contenido Principal -->
    <div class="col-lg-8">
        <!-- Pestañas -->
        <ul class="nav nav-tabs mb-4" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="courses-tab" data-bs-toggle="tab" data-bs-target="#courses" type="button" role="tab">
                    <i class="fas fa-book me-2"></i>Cursos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="certificates-tab" data-bs-toggle="tab" data-bs-target="#certificates" type="button" role="tab">
                    <i class="fas fa-certificate me-2"></i>Certificados
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="activity-tab" data-bs-toggle="tab" data-bs-target="#activity" type="button" role="tab">
                    <i class="fas fa-history me-2"></i>Actividad
                </button>
            </li>
        </ul>

        <!-- Contenido de Pestañas -->
        <div class="tab-content">
            <!-- Cursos -->
            <div class="tab-pane fade show active" id="courses" role="tabpanel">
                {{#courses}}
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-auto">
                                <div class="course-icon bg-primary bg-opacity-10 text-primary rounded p-3">
                                    <i class="fas fa-graduation-cap fa-2x"></i>
                                </div>
                            </div>
                            <div class="col">
                                <h5 class="card-title mb-1">{{name}}</h5>
                                <p class="text-muted small mb-2">{{category}} • {{instructor}}</p>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: {{progress}}%"></div>
                                </div>
                                <div class="d-flex justify-content-between mt-2">
                                    <small class="text-muted">{{progress}}% completado</small>
                                    <small class="text-muted">{{completed_lessons}}/{{total_lessons}} lecciones</small>
                                </div>
                            </div>
                            <div class="col-auto">
                                <a href="/course/{{id}}" class="btn btn-primary">
                                    Continuar
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {{/courses}}

                {{^courses}}
                <div class="card">
                    <div class="card-body text-center py-5">
                        <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                        <h5>No tienes cursos inscritos</h5>
                        <p class="text-muted">Explora nuestro catálogo y comienza a aprender</p>
                        <a href="/courses/browse" class="btn btn-primary">
                            <i class="fas fa-search me-2"></i>Explorar Cursos
                        </a>
                    </div>
                </div>
                {{/courses}}
            </div>

            <!-- Certificados -->
            <div class="tab-pane fade" id="certificates" role="tabpanel">
                <div class="row">
                    {{#certificates}}
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="fas fa-certificate fa-3x text-warning mb-3"></i>
                                <h6 class="card-title">{{course_name}}</h6>
                                <p class="text-muted small mb-3">{{date}}</p>
                                <div class="d-flex gap-2 justify-content-center">
                                    <a href="/certificate/view/{{id}}" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-eye me-1"></i>Ver
                                    </a>
                                    <a href="/certificate/download/{{id}}" class="btn btn-sm btn-outline-success">
                                        <i class="fas fa-download me-1"></i>Descargar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/certificates}}

                    {{^certificates}}
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body text-center py-5">
                                <i class="fas fa-certificate fa-3x text-muted mb-3"></i>
                                <h5>No tienes certificados aún</h5>
                                <p class="text-muted">Completa cursos para obtener certificados</p>
                            </div>
                        </div>
                    </div>
                    {{/certificates}}
                </div>
            </div>

            <!-- Actividad -->
            <div class="tab-pane fade" id="activity" role="tabpanel">
                {{#activities}}
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="activity-icon bg-{{type}} bg-opacity-10 text-{{type}} rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 45px; height: 45px;">
                                <i class="{{icon}}"></i>
                            </div>
                            <div class="flex-grow-1">
                                <h6 class="mb-1">{{title}}</h6>
                                <p class="text-muted mb-1">{{description}}</p>
                                <small class="text-muted">
                                    <i class="fas fa-clock me-1"></i>
                                    {{time}}
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                {{/activities}}

                {{^activities}}
                <div class="card">
                    <div class="card-body text-center py-5">
                        <i class="fas fa-history fa-3x text-muted mb-3"></i>
                        <h5>No hay actividad reciente</h5>
                        <p class="text-muted">Tu actividad aparecerá aquí</p>
                    </div>
                </div>
                {{/activities}}
            </div>
        </div>
    </div>
</div>
